/**
 * 
 */
$(document).ready(async function(){
	let indate = new Date().toISOString().slice(0, 10);
	let outdate = new Date(new Date().setDate(new Date().getDate() + 1)).toISOString().slice(0, 10);
	
	if(checkdate_param=='true'){
        $(".checkIn").val(indate);
        $(".checkOut").val(outdate);
	}
	$(".checkIn").attr('min',indate);
	$(".checkOut").attr('min',outdate);
	
	if($('.Starlocation').length){
		await serchHotelList($('.Starlocation').eq(0));
		await serchHotelList($('.lowPricelocation').eq(0));
	}
});

function logout() {
	if(confirm('로그아웃 진행하십니까?')){
		location.href=contextPath+"/user_logout.do";
	}else{
		return ;
	}
}

function likeInsert(self, no){
	if(user_no!=''){
		$.ajax({
			contentType : "application/x-www-form-urlencoded;charset=UTF-8",
			type: "post",
			url : "hotel_likeInsert_jjim.do",
			data : {
				param_hotel_no: no,
				param_user_no: user_no
			},
			datatype : "text",
			success : function(data){
				let txt = "<i class='fa fa-heart' aria-hidden='true'></i>"
				
				if(data>0){
					$(self).html(txt);
					$(self).attr('onclick', 'likeDelete(this, '+no+')');
				}else{
					alert('찜등록 실패..');
				}
			},
			error : function(){
				alert("찜 등록 중 시스템 오류");
			}
		}); // ajax함수 end
	}else{
		alert('로그인이 필요합니다.');
	}
}

function likeDelete(self, no){
	if(user_no!=''){
		$.ajax({
			contentType : "application/x-www-form-urlencoded;charset=UTF-8",
			type: "post",
			url : "hotel_likeDelete_jjim.do",
			data : {
				param_hotel_no: no,
				param_user_no: user_no
			},
			datatype : "text",
			success : function(data){
				let txt = "<i class='fa fa-heart-o' aria-hidden='true'></i>"
				
				if(data>0){
					$(self).html(txt);
					$(self).attr('onclick', 'likeInsert(this, '+no+')');
				}else{
					alert('찜등록 실패..');
				}
			},
			error : function(){
				alert("찜 취소 중 시스템 오류");	
			}
		}); // ajax함수 end
	}else{
		alert('로그인이 필요합니다.');
	}
}

function openMypage(){
	$('.submenu').css('display','flex');
	$('.submenu').mouseleave(function(){
		$('.submenu').css('display','none');
	});
}

function move_footer_board(){
	if(user_no!=''){
		location.href=contextPath+"/user_board_main.do";
	}else{
		alert("로그인이 필요합니다.");
	}
}

function goTop(){
	$('body').stop().animate({
		scrollTop:'0'
	}, 300);
}

function mindateset(self){
	let indate = $(self).val();
	let newdate = new Date(indate);
	newdate.setDate(newdate.getDate()+1);
	$('.checkOut').attr('min',newdate.toISOString().slice(0, 10));
	if($('.checkOut').val()<indate){
		$('.checkOut').val(newdate.toISOString().slice(0, 10));
	}
}